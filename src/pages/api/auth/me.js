import cookie from 'cookie'; import { connect } from '@/lib/mongoose'; import User from '@/models/User'; export default async function handler(req,res){ await connect(); const cookies = cookie.parse(req.headers.cookie || ''); const id = cookies.almukai_uid; if(!id) return res.status(200).json({ error:'Not logged' }); const user = await User.findById(id).lean(); if(!user) return res.status(200).json({ error:'Not found' }); res.json({ user }); }
